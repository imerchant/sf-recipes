@using StarfieldRecipes.Configuration
@page "/"
@inject RecipesConfiguration Configuration

<PageTitle>Index</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Hello, world!</MudText>
<MudText Class="mb-8">@Configuration.SampleData</MudText>

@foreach (var weapon in Configuration.Weapons.Values)
{
    <MudCard>
        <MudCardContent>
            <MudText>@weapon.Name</MudText>
            <MudExpansionPanels>
                @foreach (var slot in weapon.Components.Select(x => Configuration.Components[x]).GroupBy(x => x.Slot))
                {
                    <MudExpansionPanel Text="@slot.Key.ToString()">
                        <MudList Dense="true" DisablePadding="true" Clickable="false">
                            @foreach (var mod in slot)
                            {
                                <MudListItem Dense="true">
                                    @mod.Name
                                    @foreach (var resource in mod.Resources)
                                    {
                                        <MudChip Color="Configuration.Resources[resource.Key].Rarity.ToColor()">@resource.Key x@(resource.Value)</MudChip>
                                    }
                                </MudListItem>
                                <MudDivider />
                            }
                        </MudList>
                    </MudExpansionPanel>
                }
            </MudExpansionPanels>
        </MudCardContent>
    </MudCard>
}